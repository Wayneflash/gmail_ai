# Gmail AI回复助手 🤖

一个强大的Chrome扩展，为Gmail提供AI驱动的智能回复功能，集成DeepSeek AI模型，让邮件回复更高效、更专业。

## ✨ 主要功能

### 🧠 智能邮件分析
- **自动邮件总结**：AI自动分析邮件内容，提取关键信息
- **上下文理解**：深度理解邮件语境和发件人意图
- **多语言支持**：支持中英文邮件的智能处理

### 💬 智能回复生成
- **一键AI回复**：基于邮件内容生成专业回复
- **多种语气风格**：6种语气风格可选，支持中英文环境
  - 🌟 **自然风格**：自然和适当的语气，适合日常交流
  - 💼 **专业风格**：正式的商务邮件回复，适合工作场合
  - �� **友好风格**：温暖和亲切的语气，适合熟人交流
  - ⚡ **简洁风格**：简明扼要的表达，适合快速回复
  - 🎨 **创意风格**：富有创意和吸引力，适合营销推广
  - 🙏 **礼貌风格**：非常礼貌和尊重，适合正式场合
- **动态提示文本**：选择不同风格时显示相应的说明文字
- **内容优化**：用户输入简单想法，AI优化为专业回复
- **格式保持**：完美保持段落、换行等格式结构
- **多语言智能切换**：根据邮件语言自动适配界面语言

### 🎨 现代化界面
- **Monica AI风格**：仿照Monica AI的优雅界面设计
- **居中面板**：美观的居中显示面板，支持流式输出
- **智能按钮**：自动检测Gmail输入框，添加AI回复按钮
- **响应式设计**：适配不同屏幕尺寸
- **语气风格选择器**：现代化的下拉选择器，支持以下特性：
  - 🎨 **渐变背景**：紫色渐变背景，匹配Gmail AI品牌色彩
  - ✨ **悬停效果**：微妙的上升动画和阴影效果
  - 🔽 **自定义箭头**：SVG图标替代系统默认样式
  - 📱 **垂直布局**：标签和选择器分行显示，界面更清晰
  - 🔄 **交互反馈**：选择时的加载动画和焦点状态
  - 🌐 **多语言界面**：中英文界面无缝切换

## 🚀 快速开始

### 安装方法

1. **下载扩展文件**
   ```bash
   git clone https://github.com/Wayneflash/gmail_ai.git
   cd gmail_ai
   ```

2. **加载到Chrome**
   - 打开Chrome浏览器
   - 访问 `chrome://extensions/`
   - 开启"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择项目文件夹

3. **🎉 自动配置完成！**
   - ✅ **无需手动配置**：扩展会自动配置默认API密钥和DeepSeek-V3模型
   - ✅ **即装即用**：安装完成后可直接在Gmail中使用
   - ✅ **智能提示**：扩展图标会显示"配置完成"状态
   - 🔧 **可选设置**：如需自定义，点击扩展图标 → "高级设置"

### 使用方法

1. **打开Gmail**并进入邮件回复页面
2. **自动显示AI按钮**（在输入框下方）
3. **点击AI回复按钮**打开智能面板
4. **查看邮件总结**（自动生成）
5. **输入回复想法**到文本框中
6. **点击"AI优化回复"**生成专业回复
7. **点击"使用此回复"**插入到Gmail编辑器

> 💡 **提示**：首次使用时，扩展已自动配置完成，无需任何设置即可开始使用！

## 🔧 技术特性

### AI集成
- **DeepSeek-V3模型**：使用最新的DeepSeek-V3大语言模型
- **流式输出**：支持实时流式响应，提升用户体验
- **多模型支持**：支持DeepSeek系列和Qwen系列模型
- **智能重试**：API调用失败时自动重试机制

### Gmail兼容性
- **Manifest V3**：使用最新的Chrome扩展标准
- **完美格式保持**：智能识别邮件结构，保持原始格式
- **事件触发**：完整的Gmail事件触发机制
- **多版本支持**：兼容新版和经典版Gmail界面

### 安全性
- **本地处理**：敏感数据在本地处理，保护隐私
- **HTTPS通信**：所有API调用使用HTTPS加密
- **最小权限**：仅请求必要的浏览器权限

## 📁 项目结构

```
mail_ai/
├── manifest.json          # 扩展配置文件
├── background.js          # 后台服务脚本
├── content.js            # 内容脚本（主要功能）
├── popup/               # 弹出窗口
│   ├── popup.html
│   ├── popup.js
│   └── popup.css
├── options/             # 设置页面
│   ├── options.html
│   ├── options.js
│   └── options.css
├── icons/              # 扩展图标
│   ├── icon16.png
│   ├── icon32.png
│   ├── icon48.png
│   └── icon128.png
├── styles/             # 样式文件
│   └── content.css
├── utils/              # 工具函数
│   └── api.js
└── README.md           # 项目说明
```

## ⚙️ 配置选项

### API配置
- **API地址**：`https://api.ap.siliconflow.com/v1/chat/completions`
- **支持模型**：
  - `deepseek-ai/DeepSeek-V3` (推荐)
  - `deepseek-ai/DeepSeek-Chat`
  - `Qwen/Qwen2.5-72B-Instruct`

### 回复风格
- **自然风格**：自然和适当的语气，适合日常交流
- **专业风格**：正式的商务邮件回复，适合工作场合
- **友好风格**：温暖和亲切的语气，适合熟人交流
- **简洁风格**：简明扼要的表达，适合快速回复
- **创意风格**：富有创意和吸引力，适合营销推广
- **礼貌风格**：非常礼貌和尊重，适合正式场合

### 多语言支持
- **界面语言**：根据邮件内容自动检测并切换中英文界面
- **语气提示**：每种语气风格都有中英文对照的详细说明
- **智能适配**：语气风格选择器会根据当前语言环境显示对应文字

### 界面自定义
- **按钮位置**：可调整AI按钮的显示位置
- **面板大小**：可自定义AI面板的尺寸
- **颜色主题**：支持自定义按钮和面板颜色

## 🛠️ 开发指南

### 本地开发

1. **克隆项目**
   ```bash
   git clone https://github.com/yourusername/mail_ai.git
   cd mail_ai
   ```

2. **修改代码**
   - 主要功能在 `content.js` 中
   - API调用在 `background.js` 中
   - 界面样式在 `styles/` 目录中

3. **测试扩展**
   - 在Chrome中重新加载扩展
   - 刷新Gmail页面测试功能

### 自定义配置

详细的配置修改说明请参考 [`配置修改指引.txt`](./配置修改指引.txt)

### 常见问题

1. **AI按钮不显示**
   - 检查Gmail页面是否完全加载
   - 刷新页面重新初始化
   - 查看控制台错误信息

2. **API调用失败**
   - 验证API密钥是否正确
   - 检查网络连接
   - 尝试切换其他模型

3. **格式插入问题**
   - 使用最新版本的插入函数
   - 检查Gmail编辑器兼容性
   - 查看详细错误日志

## 🤝 贡献指南

欢迎提交Issue和Pull Request！

1. Fork本项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开Pull Request

## 📄 许可证

本项目采用MIT许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 🙏 致谢

- [DeepSeek AI](https://www.deepseek.com/) - 提供强大的AI模型
- [硅基流动](https://siliconflow.cn/) - 提供API服务
- [Monica AI](https://monica.im/) - 界面设计灵感

## 📞 支持

如果您遇到问题或有建议，请：

1. 查看 [配置修改指引](./配置修改指引.txt)
2. 提交 [Issue](https://github.com/yourusername/mail_ai/issues)
3. 查看浏览器控制台的错误信息

## 📋 版本更新日志

### v2.6.2 (2024-12-19)
🌐 **浏览器语言自动检测功能**

#### ✨ 新增功能
- **智能语言检测**：首次安装时自动检测浏览器语言设置
- **无感知体验**：根据浏览器语言自动选择中文或英文界面
- **用户优先原则**：手动切换语言后会覆盖自动检测设置
- **中文环境识别**：支持zh-CN、zh-TW、zh-HK等所有中文语言代码

#### 🎯 检测逻辑
- **中文检测**：浏览器语言包含'zh'、'cn'或'chinese'时自动设置为中文
- **英文默认**：其他所有语言环境（包括日文、韩文等）默认使用英文界面
- **存储机制**：使用languageAutoDetected标记区分自动检测和手动设置

#### 🔧 技术实现
- **安装监听**：chrome.runtime.onInstalled事件监听器
- **语言检测**：chrome.i18n.getUILanguage()获取浏览器语言
- **配置增强**：getCurrentLanguageConfig函数支持自动检测逻辑
- **手动覆盖**：switchLanguage函数标记手动设置状态

### v2.6.1 (2024-12-19)
🎉 **语气风格选择器全面升级**

#### ✨ 新增功能
- **完整多语言支持**：语气风格选择器支持中英文环境无缝切换
- **6种语气风格**：新增自然、专业、友好、简洁、创意、礼貌六种风格
- **动态提示文本**：选择不同风格时显示相应的详细说明
- **智能语言检测**：根据邮件内容自动适配界面语言

#### 🎨 UI优化
- **现代化设计**：紫色渐变背景，匹配Gmail AI品牌色彩
- **悬停效果**：微妙的上升动画和多层阴影效果
- **自定义箭头**：SVG图标替代系统默认下拉箭头
- **垂直布局**：标签和选择器分行显示，界面更清晰
- **交互反馈**：选择时的加载动画和焦点状态优化

#### 🔧 技术改进
- **事件处理优化**：实时更新提示文本的JavaScript事件处理
- **CSS模块化**：950-1050行新增现代化样式代码
- **多语言配置**：background.js中完整的双语配置支持
- **性能优化**：减少DOM操作，提升选择器响应速度

#### 📁 文件更新
- `background.js`: 新增完整的多语言配置支持
- `content.js`: UI优化和事件处理改进
- `配置修改指引.txt`: 更新详细的自定义说明
- `README.md`: 完善功能说明和使用指南

---

**⭐ 如果这个项目对您有帮助，请给个Star支持一下！** 